# 지원사업 공고 MD to JSON 변환기 개발 계획서 / PRD

## 1. 개요

본 소프트웨어는 `data/` 디렉토리에 저장된 Markdown 파일들을 순차적으로 읽어들여, 각 파일 내 지원사업 공고 정보(지원사업 공고 제목, 공고일, 지원대상자, 신청기간(선청시작일-신청 마감일), 지원금액, 지원상세내용 등)를 파싱하고 JSON 형식으로 변환합니다. **핵심 파싱 기능은 copilot 또는 ChatGPT와 같은 LLM API를 활용**하여 파일 내의 비정형 텍스트에서 정확한 정보를 추출하도록 합니다. 모든 파일 처리가 완료되면 프로그램은 자동 종료되며, 누락된 항목은 빈 문자열 (`""`) 처리합니다.

## 2. 주요 목표

- **데이터 파싱 자동화:** 스크래핑된 Markdown 파일에서 핵심 지원 정보를 LLM API를 통해 추출하고, JSON 파일로 저장
- **안정성과 유연성 보장:** MD 파일 내 정보의 불규칙함에 대처할 수 있도록 LLM 기반의 파싱 로직과 robust한 예외처리 구현
- **확장성:** 디렉토리 모니터링, CLI 인자 지원, 구성 파일 적용 등 추가 기능을 통해 다양한 환경 및 데이터 변화에 효율적으로 대응

## 3. 기능 요구사항

### 3.1 기본 기능

- **파일 입출력:**
  - `data/` 디렉토리 내의 모든 `.md` 파일을 순차적으로 읽음
  - 각 md 파일과 동일한 이름의 JSON 파일을 같은 디렉토리에 생성 (예: `announcement.md` → `announcement.json`)
- **데이터 파싱:**
  - 각 md 파일에서 아래 항목들을 추출
    - **지원사업 공고 제목**
    - **공고일**
    - **지원대상자**
    - **신청기간** (예, “선청시작일-신청 마감일” 형식)
    - **지원금액**
    - **지원상세내용**
  - **핵심 파싱은 LLM API 활용:**
    - 단순한 정규 표현식이 아닌, Copilot/ChatGPT와 같은 LLM API 호출을 통한 텍스트 분석으로 보다 유연하고 정확한 데이터 추출
    - API 호출 시 명확한 프롬프트를 구성하여 JSON 형식의 결과를 리턴받고, 필요한 필드가 누락될 경우 빈 문자열로 대체
- **JSON 파일 생성:**
  - 파싱된 결과를 Python의 dict 데이터 구조로 정리한 후, 들여쓰기 옵션을 사용하여 가독성 높은 JSON 파일로 저장
- **프로그램 종료:**
  - 지정된 `data/` 내 모든 파일 처리 완료 후 정상 종료

### 3.2 추가 기능(확장 사항)

- **명령줄 인터페이스(CLI):**
  - 사용자 인자로 대상 디렉토리 변경 (기본값: `data/`), 파일명 패턴 지정 등 옵션 제공
- **로그 기록 기능:**
  - 처리 성공/실패, 오류 메시지 등을 콘솔 및 파일(예: `app.log`)에 기록하여 디버깅 및 운영 모니터링 지원
- **구성 파일 지원:**
  - JSON 혹은 YAML 파일을 통해 파싱 규칙, 필드 명칭, API 키 및 엔드포인트 설정, 로그 레벨 등 사용자 정의 가능
- **에러 복구 및 예외 처리:**
  - 파일 입출력 및 LLM API 호출 시 발생할 예외를 robust하게 처리, 문제 발생 시 로그 기록 후 다음 파일로 진행
- **폴더 모니터링 기능 (옵션):**
  - `watchdog` 라이브러리 등을 활용하여 실시간 파일 생성 감지 및 자동 처리
- **병렬 처리 지원 (옵션):**
  - 대량의 md 파일 처리 시 멀티스레딩 혹은 멀티프로세싱을 통한 성능 최적화
- **보고서 생성 모듈 (옵션):**
  - 처리 결과(총 파일 수, 성공/실패 건수 등)를 요약한 리포트 생성 및 저장, 또는 이메일 전송 등 자동화 연계

## 4. 기술 스택 및 개발 환경

- **프로그래밍 언어:** Python 3.7 이상
- **주요 라이브러리 및 도구:**
  - 파일 처리: `os`, `glob`
  - JSON 처리: `json`
  - 텍스트 파싱: LLM API (예: OpenAI API, Azure OpenAI Service 등), 보조적으로 `re` 활용 가능
  - CLI 파싱: `argparse` 또는 `click`
  - 로깅: `logging`
  - (옵션) 폴더 모니터링: `watchdog`
- **개발 환경:**
  - IDE: VSCode, PyCharm 등
  - 버전 관리: Git (GitHub, GitLab 등)
  - 테스트 프레임워크: pytest 또는 unittest

## 5. 아키텍처 및 모듈 구성

### 5.1 주요 모듈

1. **파일 핸들러 (File Handler):**

   - `data/` 디렉토리 내 md 파일 검색 및 순차 읽기
   - 파일 입출력, 존재 여부 체크, 예외 처리 담당

2. **LLM 기반 파서 (LLM Parser):**

   - **핵심 기능:**
     - MD 파일 내 텍스트 전체 또는 부분을 LLM API에 전달하여, 지정한 prompt에 따라 **지원사업 공고 제목, 공고일, 지원 대상자, 신청기간, 지원금액, 지원 상세내용** 등의 정보를 추출
     - API의 응답 결과를 검증하여 누락된 항목은 빈 문자열(`""`)로 처리
   - 백업으로 간단한 정규 표현식을 이용한 파싱 로직 도입 고려 가능

3. **JSON 생성 및 저장 (JSON Exporter):**

   - 파싱 결과를 구조화된 JSON 객체로 변환 및 같은 파일명으로 JSON 파일 생성
   - 파일 형식 가독성을 위해 적절한 들여쓰기 옵션 적용

4. **CLI 인터페이스:**

   - 사용자 인자 파싱을 통해 디렉토리 위치, API 키 및 설정 파일 경로, 로그 레벨 등 입력 가능
   - 유연한 운영 환경을 위한 기본 옵션 제공

5. **로그 및 예외 처리 모듈:**

   - 전체 프로세스 로깅 및 API 호출, 파일 I/O에서 발생 가능한 오류 메시지 기록
   - 문제 발생 시 적절히 복구하여 전체 프로세스가 중단되지 않도록 설계

6. **(옵션) 폴더 모니터링/병렬 처리/보고서 생성:**
   - 실시간 파일 추가 감지 후 자동 처리
   - 멀티스레딩/멀티프로세싱을 통한 성능 최적화
   - 전체 처리 결과 요약 리포트 생성

### 5.2 처리 순서도 (Flowchart)

아래는 전체 데이터 처리 흐름을 나타내는 순서도입니다.

```
+-----------------------------+
|      data/ 디렉토리         |
|  (MD 파일들이 저장된 위치)  |
+-------------+---------------+
              │
              ▼
+-----------------------------+
|       파일 핸들러           |
| (MD 파일 검색 및 읽기)       |
+-------------+---------------+
              │
              ▼
+-----------------------------+
|   LLM 기반 파서 호출         |
| (API 호출: Copilot/ChatGPT) |
+-------------+---------------+
              │
              ▼
+-----------------------------+
|   파싱 결과 (Python dict)    |
|   누락된 항목: 빈 문자열    |
+-------------+---------------+
              │
              ▼
+-----------------------------+
|   JSON 생성 및 저장         |
| (동일 이름 JSON 파일 저장)  |
+-------------+---------------+
              │
              ▼
+-----------------------------+
|       파일 처리 완료         |
|   (전체 MD 파일 순차 처리)   |
+-----------------------------+
```

## 6. 개발 일정 및 마일스톤

- **1주차:**
  - 프로젝트 셋업 및 세부 요구사항 분석
  - 전체 아키텍처 설계 및 모듈별 인터페이스 정의
  - LLM API 사용을 위한 사전 조사 및 구성 파일 템플릿 작성
- **2주차:**
  - 파일 핸들러 구현: md 파일 읽기, 파일 입출력 기능
  - LLM API 연동 테스트: 기본 API 호출 및 응답 포맷 검증
- **3주차:**
  - LLM 기반 파서 구현: API 호출 및 파싱 결과 처리 기능 개발
  - 간단한 정규식 기반 백업 파서 도입 (옵션)
- **4주차:**
  - CLI, 로그 기록, 에러 처리 기능 추가
  - 구성 파일 지원 및 사용자 정의 파라미터 적용
- **5주차 (옵션):**
  - 폴더 모니터링, 병렬 처리, 보고서 생성 모듈 구현
  - 최종 통합 테스트, 유닛 테스트, 코드 리뷰 및 디버깅
- **배포 및 문서화:**
  - 사용자 매뉴얼, README, 배포 스크립트 제공

## 7. 테스트 및 품질 보증

- **유닛 테스트:**
  - 각 모듈 (파일 핸들러, LLM 기반 파서, JSON 생성기)에 대한 독립 테스트 진행
- **통합 테스트:**
  - 실제 md 파일 샘플을 대상으로 전체 처리 과정을 검증
- **에러 및 예외 처리 검증:**
  - 누락 데이터, 잘못된 파일 포맷 및 API 오류 상황 대응 테스트
- **사용자 승인 테스트 (UAT):**
  - 실제 운영 환경에서 파일 처리의 정확성 및 안정성 검증

## 8. 위험 요인 및 대응 방안

- **비정형 md 파일 구조:**
  - 다양한 파일 포맷에 유연하게 대응할 수 있도록 LLM의 파싱 로직 및 구성 파일을 통한 패턴 조정 제공
- **LLM API 호출 실패 또는 지연:**
  - 호출 실패 시 재시도 로직, 백업 파서(정규식 기반) 도입 및 적절한 타임아웃 관리 적용
- **파일 입출력 오류:**
  - robust한 예외 처리와 로그 기록 기능으로 문제 발생 시 자동 복구 또는 사용자 통보
- **성능 문제 (대용량 데이터 처리):**
  - 멀티스레딩/멀티프로세싱을 통한 성능 최적화 고려

## 9. 결론 및 추가 제안

본 프로젝트는 단순 파일 변환을 넘어 LLM API를 통한 정교한 데이터 파싱을 목표로 합니다. 이를 통해 지원사업 공고 정보의 불규칙한 형식에도 높은 정확도로 대응하며, 향후 API 연동, GUI 기반 관리 툴, 클라우드 배포 등 확장이 가능한 시스템으로 발전할 수 있습니다.

**추가 제안 사항:**

- **API 인터페이스 추가:** 다른 시스템과 연동하여 실시간 데이터 처리를 위한 RESTful API 제공
- **GUI 기반 관리 툴:** 비전문 사용자도 쉽게 사용 가능한 웹/데스크탑 인터페이스 개발
- **클라우드 배포:** 정기적인 스케줄링 작업 및 모니터링을 위한 클라우드 서비스와의 연계
